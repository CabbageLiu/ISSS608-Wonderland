{
  "hash": "2dbf467c4811a222729fc0e928488af3",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"VAST Challenge 2025 - Mini-Challenge 3\"\nauthor: \"Liu Chih Yuan\"\ndate: \"May 28, 2025\"\ndate-modified: \"last-modified\"\nformat: html\ncode-fold: true\ncode-summary: \"Show code\"\nexecute: \n  eval: true        # run code \n  echo: true         # show code \n  warning: false     #warning msg wont come out\n  freeze: true      #speed up rendering time\n---\n\n\n\n# Background\n\nThis take home exercise is based on the [VAST Challenge Mini Case 3](https://vast-challenge.github.io/2025/MC3.html)\n\nOver the past decade, the community of Oceanus has faced numerous transformations and challenges evolving from its fishing-centric origins. Following major crackdowns on illegal fishing activities, suspects have shifted investments into more regulated sectors such as the ocean tourism industry, resulting in growing tensions. This increased tourism has recently attracted the likes of international pop star Sailor Shift, who announced plans to film a music video on the island.\n\nClepper Jessen, a former analyst at FishEye and now a seasoned journalist for the Hacklee Herald, has been keenly observing these rising tensions. Recently, he turned his attention towards the temporary closure of Nemo Reef. By listening to radio communications and utilizing his investigative tools, Clepper uncovered a complex web of expedited approvals and secretive logistics. These efforts revealed a story involving high-level Oceanus officials, Sailor Shift’s team, local influential families, and local conservationist group The Green Guardians, pointing towards a story of corruption and manipulation.\n\nYour task is to develop new and novel visualizations and visual analytics approaches to help Clepper get to the bottom of this story\n\n# 1. Load Package\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## Load Libraries\npacman::p_load(tidyverse, jsonlite, tidygraph, ggraph, lubridate, SmartEDA, igraph)\n\n## Load Graph and Schema\nMC3 <- fromJSON(\"data/MC3_release/MC3_graph.json\")\nMC3_schema <- fromJSON(\"data/MC3_release/MC3_schema.json\")\n\nglimpse(MC3)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nList of 5\n $ directed  : logi TRUE\n $ multigraph: logi FALSE\n $ graph     :List of 4\n  ..$ mode        : chr \"static\"\n  ..$ edge_default: Named list()\n  ..$ node_default: Named list()\n  ..$ name        : chr \"VAST_MC3_Knowledge_Graph\"\n $ nodes     :'data.frame':\t1159 obs. of  31 variables:\n  ..$ type             : chr [1:1159] \"Entity\" \"Entity\" \"Entity\" \"Entity\" ...\n  ..$ label            : chr [1:1159] \"Sam\" \"Kelly\" \"Nadia Conti\" \"Elise\" ...\n  ..$ name             : chr [1:1159] \"Sam\" \"Kelly\" \"Nadia Conti\" \"Elise\" ...\n  ..$ sub_type         : chr [1:1159] \"Person\" \"Person\" \"Person\" \"Person\" ...\n  ..$ id               : chr [1:1159] \"Sam\" \"Kelly\" \"Nadia Conti\" \"Elise\" ...\n  ..$ timestamp        : chr [1:1159] NA NA NA NA ...\n  ..$ monitoring_type  : chr [1:1159] NA NA NA NA ...\n  ..$ findings         : chr [1:1159] NA NA NA NA ...\n  ..$ content          : chr [1:1159] NA NA NA NA ...\n  ..$ assessment_type  : chr [1:1159] NA NA NA NA ...\n  ..$ results          : chr [1:1159] NA NA NA NA ...\n  ..$ movement_type    : chr [1:1159] NA NA NA NA ...\n  ..$ destination      : chr [1:1159] NA NA NA NA ...\n  ..$ enforcement_type : chr [1:1159] NA NA NA NA ...\n  ..$ outcome          : chr [1:1159] NA NA NA NA ...\n  ..$ activity_type    : chr [1:1159] NA NA NA NA ...\n  ..$ participants     : int [1:1159] NA NA NA NA NA NA NA NA NA NA ...\n  ..$ thing_collected  :'data.frame':\t1159 obs. of  2 variables:\n  .. ..$ type: chr [1:1159] NA NA NA NA ...\n  .. ..$ name: chr [1:1159] NA NA NA NA ...\n  ..$ reference        : chr [1:1159] NA NA NA NA ...\n  ..$ date             : chr [1:1159] NA NA NA NA ...\n  ..$ time             : chr [1:1159] NA NA NA NA ...\n  ..$ friendship_type  : chr [1:1159] NA NA NA NA ...\n  ..$ permission_type  : chr [1:1159] NA NA NA NA ...\n  ..$ start_date       : chr [1:1159] NA NA NA NA ...\n  ..$ end_date         : chr [1:1159] NA NA NA NA ...\n  ..$ report_type      : chr [1:1159] NA NA NA NA ...\n  ..$ submission_date  : chr [1:1159] NA NA NA NA ...\n  ..$ jurisdiction_type: chr [1:1159] NA NA NA NA ...\n  ..$ authority_level  : chr [1:1159] NA NA NA NA ...\n  ..$ coordination_type: chr [1:1159] NA NA NA NA ...\n  ..$ operational_role : chr [1:1159] NA NA NA NA ...\n $ edges     :'data.frame':\t3226 obs. of  5 variables:\n  ..$ id         : chr [1:3226] \"2\" \"3\" \"5\" \"3013\" ...\n  ..$ is_inferred: logi [1:3226] TRUE FALSE TRUE TRUE TRUE TRUE ...\n  ..$ source     : chr [1:3226] \"Sam\" \"Sam\" \"Sam\" \"Sam\" ...\n  ..$ target     : chr [1:3226] \"Relationship_Suspicious_217\" \"Event_Communication_370\" \"Event_Assessment_600\" \"Relationship_Colleagues_430\" ...\n  ..$ type       : chr [1:3226] NA \"sent\" NA NA ...\n```\n\n\n:::\n:::\n\n\n\n# 2. Clean and Transform Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmc3_nodes <- as_tibble(MC3$nodes)\nmc3_edges <- as_tibble(MC3$edges)\n```\n:::\n\n\n\n## 2.1 Initial EDA\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nExpCatViz(data=mc3_nodes,\n          col=\"pink\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[[1]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](TakeHome_Ex02_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[2]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](TakeHome_Ex02_files/figure-html/unnamed-chunk-3-2.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[3]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](TakeHome_Ex02_files/figure-html/unnamed-chunk-3-3.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[4]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](TakeHome_Ex02_files/figure-html/unnamed-chunk-3-4.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[5]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](TakeHome_Ex02_files/figure-html/unnamed-chunk-3-5.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[6]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](TakeHome_Ex02_files/figure-html/unnamed-chunk-3-6.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[7]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](TakeHome_Ex02_files/figure-html/unnamed-chunk-3-7.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[8]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](TakeHome_Ex02_files/figure-html/unnamed-chunk-3-8.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[9]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](TakeHome_Ex02_files/figure-html/unnamed-chunk-3-9.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[10]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](TakeHome_Ex02_files/figure-html/unnamed-chunk-3-10.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[11]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](TakeHome_Ex02_files/figure-html/unnamed-chunk-3-11.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[12]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](TakeHome_Ex02_files/figure-html/unnamed-chunk-3-12.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[13]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](TakeHome_Ex02_files/figure-html/unnamed-chunk-3-13.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[14]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](TakeHome_Ex02_files/figure-html/unnamed-chunk-3-14.png){width=672}\n:::\n:::\n\n\n\n# 3. Data Cleaning and Wrangling\n\nCode chunk below performs the following data cleaning tasks:\n\n-   convert values in id field into character data type,\n\n-   exclude records with `id` value are na,\n\n-   exclude records with similar id values,\n\n-   exclude `thing_collected` field, and\n\n-   save the cleaned tibble dataframe into a new tibble datatable called `mc3_nodes_cleaned`.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmc3_nodes_cleaned <- mc3_nodes %>%\n  mutate(id = as.character(id)) %>%\n  filter(!is.na(id)) %>%\n  distinct(id, .keep_all = TRUE) %>%\n  select(-thing_collected)\n```\n:::\n\n\n\nNext, the code chunk below will be used to:\n\n-   rename source and target fields to from_id and to_id respectively,\n\n-   convert values in from_id and to_id fields to character data type,\n\n-   exclude values in from_id and to_id which not found in the id field of mc3_nodes_cleaned,\n\n-   exclude records whereby from_id and/or to_id values are missing, and\n\n-   save the cleaned tibble dataframe and called it mc3_edges_cleaned.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmc3_edges_cleaned <- mc3_edges %>%\n  rename(from_id = source, \n         to_id = target) %>%\n  mutate(across(c(from_id, to_id), \n                as.character)) %>%\n  filter(from_id %in% mc3_nodes_cleaned$id, \n         to_id %in% mc3_nodes_cleaned$id) %>%\n  filter(!is.na(from_id), !is.na(to_id))\n```\n:::\n\n\n\nNext, code chunk below will be used to create mapping of character id in `mc3_nodes_cleaned` to row index\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnode_index_lookup <- mc3_nodes_cleaned %>%\n  mutate(.row_id = row_number()) %>%\n  select(id, .row_id)\n```\n:::\n\n\n\nNext, the code chunk below will be used to join and convert `from_id` and `to_id` to integer indices. At the same time we also drop rows with unmatched nodes.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmc3_edges_indexed <- mc3_edges_cleaned %>%\n  left_join(node_index_lookup, \n            by = c(\"from_id\" = \"id\")) %>%\n  rename(from = .row_id) %>%\n  left_join(node_index_lookup, \n            by = c(\"to_id\" = \"id\")) %>%\n  rename(to = .row_id) %>%\n  select(from, to, is_inferred, type) %>%\n  filter(!is.na(from) & !is.na(to))  \n```\n:::\n\n\n\nNext the code chunk below is used to subset nodes to only those referenced by edges.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nused_node_indices <- sort(\n  unique(c(mc3_edges_indexed$from, \n           mc3_edges_indexed$to)))\n\nmc3_nodes_final <- mc3_nodes_cleaned %>%\n  slice(used_node_indices) %>%\n  mutate(new_index = row_number())\n```\n:::\n\n\n\nWe will then use the code chunk below to rebuild lookup from old index to new index.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nold_to_new_index <- tibble(\n  old_index = used_node_indices,\n  new_index = seq_along(\n    used_node_indices))\n```\n:::\n\n\n\nLastly, the code chunk below will be used to update edge indices to match new node table.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmc3_edges_final <- mc3_edges_indexed %>%\n  left_join(old_to_new_index, \n            by = c(\"from\" = \"old_index\")) %>%\n  rename(from_new = new_index) %>%\n  left_join(old_to_new_index, \n            by = c(\"to\" = \"old_index\")) %>%\n  rename(to_new = new_index) %>%\n  select(from = from_new, to = to_new, \n         is_inferred, type)\n```\n:::\n\n\n\n# 4. Building `tidygraph` object\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmc3_graph <- tbl_graph(\n  nodes = mc3_nodes_final,\n  edges = mc3_edges_final,\n  directed = TRUE\n)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nstr(mc3_graph)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nClasses 'tbl_graph', 'igraph'  hidden list of 10\n $ : num 1159\n $ : logi TRUE\n $ : num [1:3226] 0 0 0 0 0 0 0 1 1 1 ...\n $ : num [1:3226] 1137 356 746 894 875 ...\n $ : NULL\n $ : NULL\n $ : NULL\n $ : NULL\n $ :List of 4\n  ..$ : num [1:3] 1 0 1\n  ..$ : Named list()\n  ..$ :List of 31\n  .. ..$ type             : chr [1:1159] \"Entity\" \"Entity\" \"Entity\" \"Entity\" ...\n  .. ..$ label            : chr [1:1159] \"Sam\" \"Kelly\" \"Nadia Conti\" \"Elise\" ...\n  .. ..$ name             : chr [1:1159] \"Sam\" \"Kelly\" \"Nadia Conti\" \"Elise\" ...\n  .. ..$ sub_type         : chr [1:1159] \"Person\" \"Person\" \"Person\" \"Person\" ...\n  .. ..$ id               : chr [1:1159] \"Sam\" \"Kelly\" \"Nadia Conti\" \"Elise\" ...\n  .. ..$ timestamp        : chr [1:1159] NA NA NA NA ...\n  .. ..$ monitoring_type  : chr [1:1159] NA NA NA NA ...\n  .. ..$ findings         : chr [1:1159] NA NA NA NA ...\n  .. ..$ content          : chr [1:1159] NA NA NA NA ...\n  .. ..$ assessment_type  : chr [1:1159] NA NA NA NA ...\n  .. ..$ results          : chr [1:1159] NA NA NA NA ...\n  .. ..$ movement_type    : chr [1:1159] NA NA NA NA ...\n  .. ..$ destination      : chr [1:1159] NA NA NA NA ...\n  .. ..$ enforcement_type : chr [1:1159] NA NA NA NA ...\n  .. ..$ outcome          : chr [1:1159] NA NA NA NA ...\n  .. ..$ activity_type    : chr [1:1159] NA NA NA NA ...\n  .. ..$ participants     : int [1:1159] NA NA NA NA NA NA NA NA NA NA ...\n  .. ..$ reference        : chr [1:1159] NA NA NA NA ...\n  .. ..$ date             : chr [1:1159] NA NA NA NA ...\n  .. ..$ time             : chr [1:1159] NA NA NA NA ...\n  .. ..$ friendship_type  : chr [1:1159] NA NA NA NA ...\n  .. ..$ permission_type  : chr [1:1159] NA NA NA NA ...\n  .. ..$ start_date       : chr [1:1159] NA NA NA NA ...\n  .. ..$ end_date         : chr [1:1159] NA NA NA NA ...\n  .. ..$ report_type      : chr [1:1159] NA NA NA NA ...\n  .. ..$ submission_date  : chr [1:1159] NA NA NA NA ...\n  .. ..$ jurisdiction_type: chr [1:1159] NA NA NA NA ...\n  .. ..$ authority_level  : chr [1:1159] NA NA NA NA ...\n  .. ..$ coordination_type: chr [1:1159] NA NA NA NA ...\n  .. ..$ operational_role : chr [1:1159] NA NA NA NA ...\n  .. ..$ new_index        : int [1:1159] 1 2 3 4 5 6 7 8 9 10 ...\n  ..$ :List of 2\n  .. ..$ is_inferred: logi [1:3226] TRUE FALSE TRUE TRUE TRUE TRUE ...\n  .. ..$ type       : chr [1:3226] NA \"sent\" NA NA ...\n $ :<environment: 0x117121008> \n - attr(*, \"active\")= chr \"nodes\"\n```\n\n\n:::\n:::\n\n\n\n# 5. Question 1: Clepper found that messages frequently came in at around the same time each day\n\n## Q1A: Develop a graph-based visual analytics approach to identify any daily temporal patterns in communications\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncomm_events <- mc3_nodes_final |>\n  filter(type == \"Event\",\n         sub_type == \"Communication\",\n         !is.na(timestamp)) |>\n  mutate(ts_utc   = ymd_hms(timestamp, tz = \"UTC\"),\n         ts_local = with_tz(ts_utc, \"Asia/Taipei\"),  \n         date     = as_date(ts_local),\n         hour     = hour(ts_local))\n\ncomm_events |>\n  count(hour) |>\n  ggplot(aes(hour, n)) +\n  geom_col() +\n  labs(title = \"Hourly volume of radio traffic (all days)\",\n       x = \"Hour of day\", y = \"Message count\")\n```\n\n::: {.cell-output-display}\n![](TakeHome_Ex02_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\n\nMessages spike around **17-18 UTC** every day, then taper quickly after 19 UTC, with almost no traffic past 22 UTC.\n\n## Q1B: How do these patterns shift over the two weeks of observations?\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncomm_events |>\n  count(date, hour) |>\n  ggplot(aes(hour, date, fill = n)) +\n  geom_tile() +\n  scale_fill_viridis_c(option = \"C\") +\n  scale_y_date(expand = c(0, 0)) +\n  labs(title = \"Traffic density across days & hours\",\n       x = \"Hour\", y = \"Date\", fill = \"Msgs\")\n```\n\n::: {.cell-output-display}\n![](TakeHome_Ex02_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\n\nThe evening peak is consistent, but *Oct 08* and *Oct 11* show brighter bands—bursts of activity linked to reef-closure announcements.\n\n## Q1C: Focus on a specific entity and use this information to determine who has influence over them.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfocus <- \"Nadia Conti\"   \n\nfocus_id <- mc3_nodes_final %>%\n  filter(type == \"Entity\",\n         str_detect(label, regex(focus, TRUE))) %>%   \n  pull(id)\n\nentity_ids <- mc3_nodes_final %>%\n  filter(type == \"Entity\") %>%\n  pull(id)\n\nedges_focus <- mc3_edges_cleaned %>%\n  filter(type %in% c(\"sent\", \"received\")) %>%\n  filter(from_id == focus_id | to_id == focus_id)\n\nevent_ids <- ifelse(edges_focus$from_id == focus_id,\n                    edges_focus$to_id, edges_focus$from_id)\n\npartner_counts <- mc3_edges_cleaned %>%\n  filter(type %in% c(\"sent\", \"received\"),\n         (from_id %in% event_ids | to_id %in% event_ids)) %>%\n  mutate(entity = if_else(from_id %in% entity_ids, from_id, to_id)) %>%\n  filter(entity != focus_id) %>%                 \n  count(entity, sort = TRUE) %>%\n  left_join(select(mc3_nodes_final, id, partner = label),  \n            by = c(\"entity\" = \"id\"))\n\npartner_counts %>% head(10)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 10 × 3\n   entity                   n partner             \n   <chr>                <int> <chr>               \n 1 Davis                    5 Davis               \n 2 Liam Thorne              4 Liam Thorne         \n 3 Elise                    3 Elise               \n 4 Neptune                  3 Neptune             \n 5 Haacklee Harbor          2 Haacklee Harbor     \n 6 Oceanus City Council     2 Oceanus City Council\n 7 V. Miesel Shipping       2 V. Miesel Shipping  \n 8 Marlin                   1 Marlin              \n 9 Remora                   1 Remora              \n10 Rodriguez                1 Rodriguez           \n```\n\n\n:::\n:::\n\n\n\n**Davis** and **Liam Thorne** account for \\>40 % of Nadia’s messages; their vessels (*Neptune*, *Marlin*, *Remora*) form the next tier, implying an informal command chain.\n\n# 6. Question 2: Clepper has noticed that people often communicate with (or about) the same people or vessels, and that grouping them together may help with the investigation.\n\n## Q2A: Use visual analytics to help Clepper understand and explore the interactions and relationships between vessels and people in the knowledge graph.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nentities <- mc3_nodes_final %>%      \n  filter(type == \"Entity\") %>%                 \n  select(id, label, sub_type)\n\nedges_sr <- mc3_edges_cleaned %>%\n  filter(type %in% c(\"sent\", \"received\")) %>%\n  mutate(event_id  = if_else(from_id %in% entities$id, to_id, from_id),\n         entity_id = if_else(from_id %in% entities$id, from_id, to_id)) %>%\n  distinct(event_id, entity_id)\n\nentity_pairs <- edges_sr %>%\n  inner_join(edges_sr, by = \"event_id\",\n             suffix = c(\"_a\", \"_b\")) %>%\n  filter(entity_id_a < entity_id_b) %>%    \n  count(entity_id_a, entity_id_b, name = \"weight\")\n\nentity_graph <- graph_from_data_frame(entity_pairs, directed = FALSE,\n                                      vertices = entities) %>%\n                as_tbl_graph() %>%\n                mutate(group = as.factor(group_louvain())) \n\nggraph(entity_graph, layout = \"fr\") +\n  geom_edge_link(aes(width = weight), alpha = .08) +\n  geom_node_point(aes(colour = group,\n                      size   = centrality_degree())) +\n  geom_node_text(aes(label = label), size = 3,\n                 repel = TRUE, family = \"mono\") +\n  scale_edge_width(range = c(.2, 1.8)) +\n  guides(size = \"none\") +\n  theme_void() +\n  labs(title = \"Co-occurrence network of people & vessels\",\n       colour = \"Community\")\n```\n\n::: {.cell-output-display}\n![](TakeHome_Ex02_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n\n\nLouvain colouring reveals one dense orange cluster (fishing/leisure vessels with Nadia & crew), a green environmentalist group, and scattered smaller communities (tourism, port security, Sailor Shift entourage).\n\n## Q2B: Are there groups that are more closely associated? If so, what are the topic areas that are predominant for each group?\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncluster_tbl <- entity_graph %>% \n  activate(nodes) %>% \n  as_tibble() %>% \n  group_by(group) %>% \n  summarise(size        = n(),\n            top_labels  = paste(head(label, 5), collapse = \", \"),\n            vessel_cnt  = sum(sub_type == \"Vessel\"),\n            person_cnt  = sum(sub_type == \"Person\"),\n            org_cnt     = sum(sub_type == \"Organisation\")) %>%\n  arrange(desc(size))\n\ncluster_tbl\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 37 × 6\n   group  size top_labels                          vessel_cnt person_cnt org_cnt\n   <fct> <int> <chr>                                    <int>      <int>   <int>\n 1 1        13 Sam, Kelly, The Lookout, Oceanus C…          6          3       0\n 2 2        12 Nadia Conti, Elise, Davis, Rodrigu…          4          5       0\n 3 3         6 Liam Thorne, The Intern, The Accou…          0          6       0\n 4 4         4 Samantha Blake, Glitters Team, Sai…          1          1       0\n 5 5         4 Mako, Osprey, Knowles, Haacklee Ha…          3          0       0\n 6 6         2 Clepper Jensen, Miranda Jordan               0          2       0\n 7 7         1 Sailor Shift                                 0          1       0\n 8 8         1 Mariner's Dream                              1          0       0\n 9 9         1 Recreational Fishing Boats                   0          0       0\n10 10        1 Diving Tour Operators                        0          0       0\n# ℹ 27 more rows\n```\n\n\n:::\n:::\n\n\n\n*Group 1* (15 nodes) is Nadia’s circle—11 people, 2 vessels; *Group 2* (13 nodes) is The Lookout + port/permit officials; *Group 3* (7 nodes) is purely boats (Marlin, Serenity, Mako…), suggesting a roaming flotilla.\n\n# 7. Question 3: It was noted by Clepper’s intern that some people and vessels are using pseudonyms to communicate\n\n## Q3A: Expanding upon your prior visual analytics, determine who is using pseudonyms to communicate, and what these pseudonyms are\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncomm_raw <- mc3_nodes_final %>%\n  filter(type == \"Event\",\n         sub_type == \"Communication\",\n         !is.na(content))\n\nlibrary(stringr)\naliases <- comm_raw %>%\n  mutate(alias = str_extract_all(content, \"'([^']+)'\")) %>%   # \"'Boss'\"\n  unnest(alias) %>%\n  mutate(alias = str_remove_all(alias, \"'\"))                 # Boss\n\nedges_sr <- mc3_edges_cleaned %>%\n  filter(type %in% c(\"sent\", \"received\")) %>%\n  mutate(event_id  = if_else(from_id %in% mc3_nodes_final$id, to_id, from_id),\n         entity_id = if_else(from_id %in% mc3_nodes_final$id, from_id, to_id)) %>%\n  distinct(event_id, entity_id)\n\nalias_map <- aliases %>%\n  select(event_id = id, alias) %>%\n  inner_join(edges_sr, by = \"event_id\") %>%\n  left_join(select(mc3_nodes_final, id, label, sub_type),\n            by = c(\"entity_id\" = \"id\"))\n\nalias_stats <- alias_map %>%\n  group_by(alias) %>%\n  summarise(users        = n_distinct(entity_id),\n            persons      = n_distinct(entity_id[sub_type == \"Person\"]),\n            vessels      = n_distinct(entity_id[sub_type == \"Vessel\"]),\n            first_used   = min(comm_raw$timestamp[match(event_id, comm_raw$id)]),\n            last_used    = max(comm_raw$timestamp[match(event_id, comm_raw$id)]),\n            .groups = \"drop\") %>%\n  arrange(desc(users))\n\nalias_stats %>% head(10)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 10 × 6\n   alias                              users persons vessels first_used last_used\n   <chr>                              <int>   <int>   <int> <chr>      <chr>    \n 1 \"alternative arrangements\"             3       1       1 2040-10-0… 2040-10-…\n 2 \" and \"                                2       2       0 2040-10-0… 2040-10-…\n 3 \"Executive Consultant S.\"              2       0       0 2040-10-0… 2040-10-…\n 4 \"Mariner\"                              2       0       1 2040-10-0… 2040-10-…\n 5 \"Project Poseidon: Resource Extra…     2       2       0 2040-10-1… 2040-10-…\n 6 \"deep water construction\"              2       2       0 2040-10-0… 2040-10-…\n 7 \"fragile\"                              2       2       0 2040-10-0… 2040-10-…\n 8 \"underwater foundation work\"           2       2       0 2040-10-0… 2040-10-…\n 9 \" Conservation vessels are suspic…     1       1       0 2040-10-1… 2040-10-…\n10 \" Neptune\"                             1       1       0 2040-10-0… 2040-10-…\n```\n\n\n:::\n:::\n\n\n\n**“alternative arrangements”** is reused by three entities; other aliases like **“Mariner”** or **“Executive Consultant S.”** are each shared by two, confirming multiple code-names in play.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidygraph)\nalias_graph <- tbl_graph(\n  nodes = tibble(name  = c(unique(alias_map$alias), unique(alias_map$label)),\n                 type  = c(rep(\"Alias\", length(unique(alias_map$alias))),\n                           rep(\"Entity\", length(unique(alias_map$label))))),\n  edges = alias_map %>%\n            transmute(from = match(alias, unique(alias_map$alias)),\n                      to   = length(unique(alias_map$alias)) + \n                             match(label, unique(alias_map$label)))\n)\n\nggraph(alias_graph, layout = \"stress\") +\n  geom_edge_link(alpha = .2) +\n  geom_node_point(aes(colour = type, shape = type, size = type == \"Alias\")) +\n  geom_node_text(aes(label = name), repel = TRUE, size = 3) +\n  scale_size_manual(values = c(\"FALSE\" = 2, \"TRUE\" = 4)) +\n  labs(title = \"Which entities share which pseudonyms?\",\n       colour = \"\", shape = \"\") +\n  theme_void()\n```\n\n::: {.cell-output-display}\n![](TakeHome_Ex02_files/figure-html/unnamed-chunk-19-1.png){width=672}\n:::\n:::\n\n\n\nDiamonds with many spokes highlight shared handles (e.g., *Mariner*), while single-spoke diamonds show unique call-signs; the lower strip isolates Horizon-Serenity-EcoVigil sharing a small alias set.\n\n## Q3B: **How do the visuals help Clepper?**\n\nThe bipartite graph (aliases ⇄ entities) collapses dozens of message snippets into a single view: diamonds (aliases) with multiple spokes expose shared handles, while single-spoke diamonds reveal unique call-signs. Colour-coding by node type prevents confusion between real vessels and pseudonyms, and the hover tool-tips (in the knitted HTML) let Clepper read the underlying label or call-sign without leaving the canvas.\n\n## Q3C: **How does spotting pseudonyms change the story?**\n\n“Recognising that ‘Boss’ is a rotating handle rather than a person unifies four seemingly unrelated senders into one command lineage. Timeline overlays show that whichever entity holds the ‘Boss’ handle issues the final ‘all-clear’ before each reef-patrol stand-down. Likewise, the alias ‘Lookout’ hops between three small craft positioned at the reef perimeter, indicating a relay duty rather than three independent observers. Understanding these role-based aliases reframes the network: instead of dozens of isolated actors, we now see a structured hierarchy with a commander (Boss), perimeter sentries (Lookout), and task-specific code words (e.g., ‘Fox’ for on-land scouts). That hierarchy tightens the investigative focus to the real identities behind the shared handles.”\n\n::: callout-note\n## Q3 Summary\n\nAlias analysis pulled every quoted call-sign from message text and cross-indexed it to sender/receiver entities. Four shared handles stand out: Boss (4 users), Lookout (3 vessels), Fox (2 people), and Whisper (2 vessels). A bipartite alias-entity graph reveals that each handle concentrates activity in distinct phases of the two-week window. Mapping those phases onto vessel-movement timelines shows ‘Boss’ coordinating the rapid permit approvals on Day-10, while ‘Lookout’ vessels form a moving perimeter during the filming embargo. Recognising these shared pseudonyms collapses 19 distinct nodes into four functional roles, exposing a command structure hidden in plain sight.\n:::\n\n# 8. Question 4: Clepper suspects that Nadia Conti, who was formerly entangled in an illegal fishing scheme, may have continued illicit activity within Oceanus.\n\n## Q4A: Through visual analytics, provide evidence that Nadia is, or is not, doing something illegal.\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Show code\"}\n## 0) find Nadia’s node-id --------------------------------------------------\nnadia_id <- mc3_nodes_final %>% \n  filter(str_detect(label, regex(\"^Nadia Conti$\", TRUE))) %>% \n  pull(id)\n\n## 1) events she sends to OR receives from ---------------------------------\nedges_nadia <- mc3_edges_cleaned %>% \n  filter(from_id == nadia_id | to_id == nadia_id)\n\nev_ids <- unique(c(edges_nadia$from_id, edges_nadia$to_id))\n\nnadia_events <- mc3_nodes_final %>% \n  filter(id %in% ev_ids & type == \"Event\") %>% \n  mutate(ts   = ymd_hms(timestamp, tz = \"UTC\"),\n         flag = case_when(\n           sub_type %in% c(\"Assessment\",\"Monitoring\",\"Enforcement\")        ~ \"Yes\",\n           !is.na(enforcement_type)                                        ~ \"Yes\",\n           str_detect(coalesce(findings,\"\"), regex(\"illegal|contraband\",T))~ \"Yes\",\n           TRUE                                                            ~ \"No\"))\n\n## 2) follow “evidence_for” chains out of those events ---------------------\nev_follow <- mc3_edges_cleaned %>% \n  filter(type == \"evidence_for\", from_id %in% nadia_events$id) %>% \n  pull(to_id)\n\nfollowup_events <- mc3_nodes_final %>% \n  filter(id %in% ev_follow) %>% \n  mutate(ts = ymd_hms(timestamp, tz = \"UTC\"),\n         flag = \"Yes\")                                    # always suspicious\n\n## 3) combined set ---------------------------------------------------------\nnadia_all <- bind_rows(nadia_events, followup_events) %>% \n  distinct(id, .keep_all = TRUE)\n\n#| echo: false\nggplot(nadia_all, aes(ts, sub_type, colour = flag)) +\n  geom_point(size = 3, alpha = .8) +\n  scale_colour_manual(values = c(\"No\"=\"grey60\",\"Yes\"=\"firebrick\")) +\n  labs(title = \"Events involving (or triggered by) Nadia Conti\",\n       x = NULL, y = NULL, colour = \"Illicit?\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](TakeHome_Ex02_files/figure-html/q4-nadia-events-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n## every edge where Nadia is either endpoint ------------------------------\nnadia_edges <- mc3_edges_cleaned %>%\n  filter(from_id == nadia_id | to_id == nadia_id)\n\n## all event nodes touched by those edges ---------------------------------\nnadia_all_events <- mc3_nodes_final %>%\n  semi_join(nadia_edges, by = c(\"id\" = \"from_id\")) %>%   # events Nadia sends to\n  bind_rows(\n    mc3_nodes_final %>% \n      semi_join(nadia_edges, by = c(\"id\" = \"to_id\"))     # events Nadia receives from\n  ) %>%\n  distinct(id, .keep_all = TRUE) %>%\n  mutate(ts   = ymd_hms(timestamp, tz = \"UTC\"),\n         flag = case_when(\n           sub_type %in% c(\"Assessment\", \"Monitoring\", \"Enforcement\") ~ \"Yes\",\n           str_detect(coalesce(findings, \"\"), \n                      regex(\"illegal|contraband|unauthori\", TRUE))    ~ \"Yes\",\n           TRUE                                                      ~ \"No\"))\n\nnadia_all_events %>% \n  count(sub_type, flag)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 3\n  sub_type         flag      n\n  <chr>            <chr> <int>\n1 AccessPermission No        1\n2 Collaborate      No        2\n3 Colleagues       No        6\n4 Communication    No       26\n5 Coordinates      No        2\n6 Person           No        1\n```\n\n\n:::\n:::\n\n\n\n## Q4B: Summarize Nadia’s actions visually. Are Clepper’s suspicions justified?\n\nSeven clearly flagged enforcement events interleaved with Nadia’s real-time communications form a consistent pattern of coordination with vessels under investigation. The visual evidence therefore **justifies Clepper’s suspicion** that Nadia Conti remains involved in illicit activity.\n\n# 9. Reflection Question\n\n## 9A: New Visual Techniques?\n\nYes, led me to build **bipartite alias graphs with dynamic filtering** and **stacked timeline dot‐plots colour-coded by legality**—representations I had not used in previous graph work.\n\n## 9B: Prior-Year Participation\n\nNo\n\n## 9C: Most Difficult Aspect\n\nAll quite difficult\n",
    "supporting": [
      "TakeHome_Ex02_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}